<!DOCTYPE html>
<html>

<head>
    <title>2015077</title>

    <style>
        h1 {
            text-align: center;
        }

        div#participants {
            width: auto;
            height: auto;
        }
    </style>
</head>

<body>
    <div id="header">
        <h1> participants </h1>
    </div>

    <div id="participants"></div>

    <script>
        var participantsElement = document.getElementById("participants");
        participantsElement.style.border = "2px solid black";

        function appendParticipantToHtml(participant) {
            var newParticipant = document.createElement("DIV");
            newParticipant.id = participant.login;
            newParticipant.style.display = "inline-flex";
            newParticipant.style.width = "auto";
            newParticipant.style.height = "auto";
            newParticipant.style.margin = "10px";
            newParticipant.style.padding = "10px";
            newParticipant.style.border = "2px solid black";
            newParticipant.style.borderRadius = "5px";
            newParticipant.style.backgroundColor = "lightblue";
            newParticipant.onmouseover = function() {
                newParticipant.style.transform = "scale(1.1)";
            };
            newParticipant.onmouseout = function() {
                newParticipant.style.transform = "scale(1)";
            };

            var participantImg = new Image(50, 50)
            participantImg.id = participant.login + "-img";
            participantImg.src = participant.avatar_url;
            participantImg.style.cursor = "pointer";
            participantImg.style.marginRight = "10px";
            participantImg.style.padding = "0";
            participantImg.style.border = "2px solid black";
            participantImg.onclick = function(participant) {
                window.open(participant.html_url);
            };

            var participantP = document.createElement("P");
            participantP.id = participant.login + "-p";
            participantP.style.width = "auto";
            participantP.style.height = "auto";
            participantP.style.left = "60px";
            participantP.style.margin = "0";
            participantP.style.padding = "5px";
            participantP.style.border = "2px solid black";
            participantP.style.backgroundColor = "white";
            participantP.innerHTML = "<b>Name:</b> " + participant.login + " </br> <b>commits:</b> " + participant.contributions;

            newParticipant.appendChild(participantImg);
            newParticipant.appendChild(participantP);
            participantsElement.appendChild(newParticipant);
        }

        //request data
        var xhReq = new XMLHttpRequest();
        xhReq.open("GET", "https://api.github.com/repos/ioniodi/D3js-uk-political-donations/contributors", false);
        xhReq.send(null);
        var participantsJsonObject_lst = JSON.parse(xhReq.responseText);

        //append participant to html
        for (var i = 0; i < participantsJsonObject_lst.length; i++) {
            appendParticipantToHtml(participantsJsonObject_lst[i]);
        }
    </script>
</body>

</html>
